{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Card Details Feature Schema",
  "description": "Defines the detailed structure of a card and actions for editing it.",
  "definitions": {
    "ChecklistItem": {
      "type": "object",
      "properties": { "id": { "type": "string" }, "text": { "type": "string" }, "completed": { "type": "boolean" } }
    },
    "Checklist": {
      "type": "object",
      "properties": { "id": { "type": "string" }, "title": { "type": "string" }, "items": { "type": "array", "items": { "$ref": "#/definitions/ChecklistItem" } } }
    },
    "Comment": {
      "type": "object",
      "properties": { "id": { "type": "string" }, "authorId": { "type": "string" }, "text": { "type": "string" } }
    },
    "CardDetails": {
      "type": "object",
      "properties": {
        "description": { "type": "string" },
        "comments": { "type": "array", "items": { "$ref": "#/definitions/Comment" } },
        "labels": { "type": "array", "items": { "type": "string" } },
        "members": { "type": "array", "items": { "type": "string" } },
        "dueDate": { "type": "object", "properties": { "timestamp": { "type": "number" }, "completed": { "type": "boolean" } } },
        "checklists": { "type": "array", "items": { "$ref": "#/definitions/Checklist" } }
      }
    }
  },
  "actions": {
    "updateCardDetails": { "params": [{ "name": "cardId", "type": "string" }, { "name": "updates", "type": "object", "$ref": "#/definitions/CardDetails" }] },
    "addComment": { "params": [{ "name": "cardId", "type": "string" }, { "name": "text", "type": "string" }] },
    "toggleLabel": { "params": [{ "name": "cardId", "type": "string" }, { "name": "labelId", "type": "string" }] },
    "toggleMember": { "params": [{ "name": "cardId", "type": "string" }, { "name": "memberId", "type": "string" }] },
    "addChecklist": { "params": [{ "name": "cardId", "type": "string" }, { "name": "title", "type": "string" }] }
  }
}
